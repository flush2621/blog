(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{332:function(s,t,a){s.exports=a.p+"assets/img/ora1.d6ac5e2d.png"},359:function(s,t,a){"use strict";a.r(t);var n=a(33),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"oracle笔记整理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oracle笔记整理"}},[s._v("#")]),s._v(" oracle笔记整理")]),s._v(" "),n("h2",{attrs:{id:"函数扩充"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#函数扩充"}},[s._v("#")]),s._v(" 函数扩充")]),s._v(" "),n("p",[n("em",[s._v("Timestamp:2020/5/18")])]),s._v(" "),n("h3",{attrs:{id:"一、wm-concat和connect-by"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、wm-concat和connect-by"}},[s._v("#")]),s._v(" 一、wm_concat和connect by")]),s._v(" "),n("p",[s._v("（用于Java的 raw data）")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" tmp "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rownum param "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("connect")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" rownum "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" wm_concat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\"'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("CHR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("param"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("96")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\"'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tmp\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Flux")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" stringFlux1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Flux")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("just")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"c"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"f"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"g"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"h"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"i"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"j"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"k"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"l"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"m"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"o"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"p"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"q"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"r"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"u"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"w"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"y"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"z"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"二、伪列生产汉字表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、伪列生产汉字表"}},[s._v("#")]),s._v(" 二、伪列生产汉字表")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rownum xh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("nchr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rownum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" hz "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("connect")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" rownum"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" t\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xh "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("between")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19968")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("40869")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("        XH HZ\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------- --")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27906")]),s._v(" 洂\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27907")]),s._v(" 洃\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27908")]),s._v(" 洄\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27909")]),s._v(" 洅\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27910")]),s._v(" 洆\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27911")]),s._v(" 洇\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27912")]),s._v(" 洈\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27913")]),s._v(" 洉\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27914")]),s._v(" 洊\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27915")]),s._v(" 洋\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27916")]),s._v(" 洌\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27917")]),s._v(" 洍\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27918")]),s._v(" 洎\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27919")]),s._v(" 洏\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27920")]),s._v(" 洐\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27921")]),s._v(" 洑\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27922")]),s._v(" 洒\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27923")]),s._v(" 洓\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27924")]),s._v(" 洔\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27925")]),s._v(" 洕\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27926")]),s._v(" 洖\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27927")]),s._v(" 洗\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27928")]),s._v(" 洘\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27929")]),s._v(" 洙\n     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27930")]),s._v(" 洚\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("h3",{attrs:{id:"三、拆分多行-connect-by-prior-dbms-random-value"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、拆分多行-connect-by-prior-dbms-random-value"}},[s._v("#")]),s._v(" 三、拆分多行(connect by prior, dbms_random.value)")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" p "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" area_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" wm_concat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("old_store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" store "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" store_compare \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" area_no "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" area_no\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//生成测试数据")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" area_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" to_number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("REGEXP_SUBSTR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[^,]+'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'i'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("level")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" p \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONNECT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" prior area_no "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" area_no "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" prior dbms_random"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" LENGTH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" LENGTH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("REGEXP_REPLACE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("','")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("   AREA_NO        STR      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------- ---------- ----------")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("88")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("71")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("89")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n\n已选择"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("行。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h3",{attrs:{id:"四、多行转列-pivot"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、多行转列-pivot"}},[s._v("#")]),s._v(" 四、多行转列(pivot)")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" vat_total_retail "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" erp_jxc_group\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" tran_date "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" to_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysdate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v("\n    \tlocation "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" new_store_no "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" store_compare "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" area_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pivot")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("SUM")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vat_total_retail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100097")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100098")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100101")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100103")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100198")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100199")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("  GROUP_NO     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100097")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100098")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100101")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100103")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100198")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100199")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------- ---------- ---------- ---------- ---------- ---------- ----------")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("303")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5754.09")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7530.66")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3122.16")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5531.09")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1842.2")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2235.53")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("309")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1245.2")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("89.8")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7240.7")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("310")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("624.4")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1842.1")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("966")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3648.5")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("91.8")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("269.2")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("307")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("61.8")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("482.1")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("133.4")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("81.8")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("205")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4943")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7359.25")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2524.08")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7089.8")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1752.68")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2194.8")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23678.13")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20455.59")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9076.26")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18634.53")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7083.65")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10568.19")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("36147.38")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("72443.88")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22054.07")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("37959.31")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12888.72")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("14477.76")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("306")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("402.1")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("280")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("276.48")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("692")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("223.8")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("92.4")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("308")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3615.8")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6451.3")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1607.52")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10462.25")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("350.5")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("906.3")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("206")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21560.33")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("42297.53")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12735.87")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20483.38")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4239.88")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9086.99")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("301")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2790.4")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("770.4")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("632.6")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("913.2")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("374.8")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("387.2")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("37649.24")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23336.13")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20118.01")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("35692.87")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15110.78")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20996.78")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("104")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9685.68")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13425.62")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7651.62")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12385.69")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3031.67")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4799.84")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("202")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6428.53")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10603.6")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4330.86")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6783.47")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4153.26")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3719.16")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("203")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11947.55")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9904.3")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5266.93")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10021.92")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2337.16")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3468.64")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("304")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4532.18")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5549.28")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3104.82")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5803.72")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1999.93")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1968.47")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("204")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18334.7")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("35790.53")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12650.82")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("24362.46")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4874.12")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9191.27")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("302")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("380.8")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1346.2")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("342.2")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("336.6")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("115.7")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("72.7")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("305")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("540")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("606")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("515")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1082")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("601")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n已选择"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("行。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"五、合计-grouping"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、合计-grouping"}},[s._v("#")]),s._v(" 五、合计(grouping)")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" supplier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n         location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("grouping"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'合计'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" mm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n         "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sale_amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" sales\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" extract_profit_nj\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2019%'")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" supplier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("rollup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" supplier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("  SUPPLIER   LOCATION MM                                   PROFIT      SALES\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---------- ---------- -------------------------------- ---------- ----------")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104274")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100216")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201908")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1991.458")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19914.58")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104274")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100216")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201909")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000.54")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20005.4")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104274")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100216")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201910")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1999.327")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19993.27")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104274")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100216")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201911")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1426.34")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("14263.4")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104274")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100216")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201912")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1369.25")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13692.5")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104274")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100216")]),s._v(" 合计                               "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8786.915")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("87869.15")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100098")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201907")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.2244")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51.02")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100098")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201908")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1450.8758")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6594.89")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100098")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201909")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3590.191")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("16319.05")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100098")]),s._v(" 合计                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5052.2912")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22964.96")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100101")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201907")]),s._v("                                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.544")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("25.2")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100101")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201908")]),s._v("                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("352.473")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1602.15")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100101")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201909")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("780.7294")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3548.77")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104283")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100101")]),s._v(" 合计                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1138.7464")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5176.12")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104285")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100097")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201908")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("830.9202")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3776.91")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104285")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100097")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201909")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1631.8346")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7417.43")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104285")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100097")]),s._v(" 合计                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2462.7548")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11194.34")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104285")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100103")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201908")]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("764.5154")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3475.07")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104285")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100103")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201909")]),s._v("                            "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1495.5952")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6798.16")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22104285")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100103")]),s._v(" 合计                              "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2260.1106")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10273.23")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h3",{attrs:{id:"六、综合应用-grouping-pivot-："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、综合应用-grouping-pivot-："}},[s._v("#")]),s._v(" 六、综合应用(grouping,pivot)：")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" ep "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" turn_store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" loc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" suppl_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mark "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" pages"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'季度'")]),s._v(" \n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mark "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'上半年'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'下半年'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'全年'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" intervals "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         extract_profit\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" associatesup_base "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("year")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" mark "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nepn "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("suppl_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("second_supp_name names"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("intervals"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("extract_profit\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" ep t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" erp_supplier_loc t2\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("suppl_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("second_supp\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nextra "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" supplier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n         location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("grouping"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'合计'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" mm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n         "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sale_amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" sales\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" extract_profit_nj\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2019%'")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" supplier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("rollup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" supplier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mm\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nmerges "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("suppl_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("names"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("extract_profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sales"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mm\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" epn t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" extra t2\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("suppl_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("supplier\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nprofit "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" suppl_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" names"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" loc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" extract_profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" merges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pivot")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201901")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201902")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201903")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201904")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201905")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201906")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201907")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201908")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201909")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("201910")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'合计'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" 毛利合计"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nsales "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" suppl_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" names"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" loc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" extract_profit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sales"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" merges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pivot")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sales"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'合计'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" 销售合计"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("销售合计\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" profit t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sales t2\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("suppl_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("suppl_no "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("p",[s._v("输出：")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[s._v("SUPPL_NO")]),s._v(" "),n("th",[s._v("NAMES")]),s._v(" "),n("th",[s._v("LOC")]),s._v(" "),n("th",[s._v("EXTRACT_PROFIT")]),s._v(" "),n("th",[s._v("201901")]),s._v(" "),n("th",[s._v("201902")]),s._v(" "),n("th",[s._v("201903")]),s._v(" "),n("th",[s._v("201904")]),s._v(" "),n("th",[s._v("201905")]),s._v(" "),n("th",[s._v("201906")]),s._v(" "),n("th",[s._v("201907")]),s._v(" "),n("th",[s._v("201908")]),s._v(" "),n("th",[s._v("201909")]),s._v(" "),n("th",[s._v("201910")]),s._v(" "),n("th",[s._v("毛利合计")]),s._v(" "),n("th",[s._v("销售合计")])])]),s._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("22007738")]),s._v(" "),n("td",[s._v("南京润兆食品有限公司")]),s._v(" "),n("td",[s._v("100102")]),s._v(" "),n("td",[s._v("16000")]),s._v(" "),n("td",[s._v("361.985")]),s._v(" "),n("td",[s._v("436.6875")]),s._v(" "),n("td",[s._v("272.0525")]),s._v(" "),n("td",[s._v("327.55")]),s._v(" "),n("td",[s._v("324.5325")]),s._v(" "),n("td",[s._v("217.03")]),s._v(" "),n("td",[s._v("57.975")]),s._v(" "),n("td",[s._v("203.44")]),s._v(" "),n("td",[s._v("116.2025")]),s._v(" "),n("td",[s._v("120.965")]),s._v(" "),n("td",[s._v("3130.478")]),s._v(" "),n("td",[s._v("12521.91")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("22007787")]),s._v(" "),n("td",[s._v("金华市鑫宇商贸有限公司")]),s._v(" "),n("td",[s._v("100099")]),s._v(" "),n("td",[s._v("84000")]),s._v(" "),n("td",[s._v("6143.265")]),s._v(" "),n("td",[s._v("7095.271")]),s._v(" "),n("td",[s._v("5700.585")]),s._v(" "),n("td",[s._v("5369.146")]),s._v(" "),n("td",[s._v("5484.772")]),s._v(" "),n("td",[s._v("4928.636")]),s._v(" "),n("td",[s._v("5609.974")]),s._v(" "),n("td",[s._v("6388.335")]),s._v(" "),n("td",[s._v("4041.061")]),s._v(" "),n("td",[s._v("5389.075")]),s._v(" "),n("td",[s._v("63065.21")]),s._v(" "),n("td",[s._v("200414.7")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("22007827")]),s._v(" "),n("td",[s._v("上海瑷馨露贸易有限公司")]),s._v(" "),n("td",[s._v("100099")]),s._v(" "),n("td",[s._v("60000")]),s._v(" "),n("td",[s._v("222.2976")]),s._v(" "),n("td",[s._v("162.24")]),s._v(" "),n("td",[s._v("54.72")]),s._v(" "),n("td",[s._v("510.3864")]),s._v(" "),n("td",[s._v("101.49")]),s._v(" "),n("td",[s._v("340.68")]),s._v(" "),n("td"),s._v(" "),n("td"),s._v(" "),n("td"),s._v(" "),n("td",[s._v("55.23555")]),s._v(" "),n("td",[s._v("1775.49")]),s._v(" "),n("td",[s._v("7195.46")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("22104132")]),s._v(" "),n("td",[s._v("广州希艺欧家居用品有限公司...")]),s._v(" "),n("td",[s._v("100103...")]),s._v(" "),n("td",[s._v("61600")]),s._v(" "),n("td"),s._v(" "),n("td"),s._v(" "),n("td"),s._v(" "),n("td"),s._v(" "),n("td"),s._v(" "),n("td"),s._v(" "),n("td",[s._v("3214.572")]),s._v(" "),n("td",[s._v("5744.702")]),s._v(" "),n("td",[s._v("5463.819")]),s._v(" "),n("td",[s._v("4439.644")]),s._v(" "),n("td",[s._v("27218.25")]),s._v(" "),n("td",[s._v("121426.2")])])])]),s._v(" "),n("h3",{attrs:{id:"七、复杂报表查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#七、复杂报表查询"}},[s._v("#")]),s._v(" 七、复杂报表查询")]),s._v(" "),n("h4",{attrs:{id:"_1、行列综合互换，lag-lead"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、行列综合互换，lag-lead"}},[s._v("#")]),s._v(" 1、行列综合互换，lag,lead")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("With")]),s._v(" dm_sal "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("As")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Ref_no1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("area_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xsje"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" mm_sal\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v(" erp_st_xsjlc t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dm_4017 t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("store_compare t2\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Where")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("item"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("item\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Location"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loc\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Location"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("new_store_no\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("area_no "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("In")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jzrq "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("Between")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("promot_start_date "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("promot_end_date\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Group")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("By")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Ref_no1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("area_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Location\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nsal "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("As")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v(" area_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vat_total_retail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" sale_amount \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v(" erp_jxc_group t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("store_compare t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Groups t2\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Where")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Location"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("new_store_no\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("area_no "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("In")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" tran_date "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("Between")]),s._v(" to_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20200805")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yyyymmdd'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v("  to_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20200818")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yyyymmdd'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<>")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("601")]),s._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Group")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("By")]),s._v(" area_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Location\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Having")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("Sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vat_total_retail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<>")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nstep1 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("As")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sale_amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" sale_amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mm_sal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" mm_sal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("round")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mm_sal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sale_amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" zb\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v(" dm_sal t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sal t2\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Where")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group_no\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nstep2 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v(" step1\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unpivot")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" x "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" flag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sale_amount "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mm_sal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("zb "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nstep3 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100097"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100097"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100101"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100101"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100103"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100103"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n       nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100198"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100198"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100199"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100199"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100097"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100101"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100103"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100198"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100199"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" cnt\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step2\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pivot")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100097")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100101")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100103")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100198")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100199")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100097"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100101"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100103"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100198"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100199"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ZB'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("round")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cnt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cnt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" group_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("cnt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" agg\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step3\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("p",[s._v("2、正则表达式的扩展应用")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" stinfo "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("wm_concat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("new_store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("','")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'|'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" stinf "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" store_compare "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" area_no "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("51")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--门店正则匹配式生成")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pre1 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rownum rn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" to_char"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yyyymmdd'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("rownum"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yymmdd'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" atomic\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dual\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("connect")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" rownum "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" to_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yyyymmdd'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("to_date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yyyymmdd'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--日期序列生成")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pre2 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" rn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" to_number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("REGEXP_SUBSTR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\d{1}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'i'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("level")]),s._v(" depth\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" pre1 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONNECT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" prior rn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rn "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" prior dbms_random"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--日期单字符切片")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pre3 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" depth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" wm_concat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" xman\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pre2\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" depth\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--按depth对位转置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prend "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0+'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("b"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("c"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("d"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("f"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("f"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("']\\d{4}'")]),s._v(" strformat\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pre3 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pivot")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xman"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" depth "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" f"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--发票号正则匹配式")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("handler")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("\n  decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("\n  decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("atomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" contrast\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pre1\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--生成店号正则对照组")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" middleunit "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" ebs_store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" invno tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pay_steps\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" pay4016_plus\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unpivot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("invno "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tran_no3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tran_no4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--转置，生成发票全表")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" step1 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" ebs_store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pay_steps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("regexp_substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("strformat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" len"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("regexp_instr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("strformat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" raw_st_till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         regexp_substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("strformat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" invno"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" middleunit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prend\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--拆分发票号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("step2 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" regexp_instr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_st_till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("stinf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("st_flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pay_steps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         raw_st_till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" invno"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ebs_store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("len\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" stinfo\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--拆分店号、款台号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("step3 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" old_store_no store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pay_steps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("st_flag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_st_till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("st_flag"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("st_flag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_st_till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_st_till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("regexp_instr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("raw_st_till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("new_store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("when")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("st_flag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" invno "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" raw_st_till\n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("invno"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" len\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step2 t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" store_compare t2\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ebs_store_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ebs_store_no \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--修正标准化款台号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("step4 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" len"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pay_steps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         lpad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" atomic"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("substr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("invno"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("handler")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" regexp_like"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("invno"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" contrast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" invno\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step3\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" len"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pay_steps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" lpad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("till"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v("invno invno\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step3\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--修正标准化发票号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("step5 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pay_steps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" total_amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TRAN_NO'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TRAN_NO'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TRAN_NO3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" tran_no3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TRAN_NO3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" amount3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TRAN_NO4'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" tran_no4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TRAN_NO4'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("nvl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" amount4\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step4 t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pay_sal4016plus t2\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("store_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("invno"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tran_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("store_no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pay_steps\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" step5 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" total_amount "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" pay_steps\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--having sum(nvl(t2.amount,0))=0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--having sum(nvl(t2.amount,0)) - t1.pay_steps < 0 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--order by sum(nvl(t2.amount,0)) - t1.pay_steps desc, no")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br")])]),n("h2",{attrs:{id:"系统信息查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#系统信息查询"}},[s._v("#")]),s._v(" 系统信息查询")]),s._v(" "),n("h3",{attrs:{id:"一、session明细-v-session-v-sqlarea-v-process"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、session明细-v-session-v-sqlarea-v-process"}},[s._v("#")]),s._v(" 一、Session明细(v$session,v$sqlarea,v$process)")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" SE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" SE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("serial")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#, PR.spid, SE.status, SUBSTR(SE.program, 1, 10) PROG,")]),s._v("\n    SUBSTR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("machine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" MACH"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    SQ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sql_text\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" v$"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("session")]),s._v(" SE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" v$sqlarea SQ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" v$process PR\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" SE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("paddr "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ADDR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" SE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sql_address "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" SQ"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" schemaname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HEADOF'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" SE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[n("img",{attrs:{src:a(332),alt:"An image"}})]),s._v(" "),n("h3",{attrs:{id:"二、v-session-longops-执行-6s的sql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、v-session-longops-执行-6s的sql"}},[s._v("#")]),s._v(" 二、v$session_longops(执行>6s的sql)")]),s._v(" "),n("p",[s._v("v$session_longops是v$session的子集")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" V"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SQL_ID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("USERNAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SID"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OPNAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       T"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" T"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("program"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" T"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("machine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ROUND")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TOTALWORK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOFAR "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TOTALWORK"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"执行进度百分比"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TIME_REMAINING "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"估计剩余时间(秒)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       V"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SQL_TEXT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ELAPSED_SECONDS "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"执行时间(秒)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("START_TIME "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"执行开始时间"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TOTALWORK "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"总数(块block)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOFAR "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"已完成数(块block)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       decode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ELAPSED_SECONDS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOFAR "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ELAPSED_SECONDS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"每秒扫描数(块block)"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" V$SESSION_LONGOPS A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" V$"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v(" V"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" V$"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SESSION")]),s._v(" T\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SQL_ADDRESS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" V"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ADDRESS\n   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SID "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" T"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SID\n   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SQL_HASH_VALUE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" V"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("HASH_VALUE\n   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" schemaname "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HEADOF'")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" A"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ELAPSED_SECONDS "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h3",{attrs:{id:"三、dba-scheduler-jobs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、dba-scheduler-jobs"}},[s._v("#")]),s._v(" 三、dba_scheduler_jobs")]),s._v(" "),n("p",[s._v("... ...")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" v$sqlarea "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" sql_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'g9yvnt209fvxx'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" v$"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("sql")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" sql_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'59v4zh1ac3v2a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" V$SESSION_LONGOPS "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" sid"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dba_scheduler_jobs "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" enabled"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'TRUE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dba_autotask_client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dba_scheduler_windows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" dba_autotask_window_clients"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);