<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SpringBoot | Coding Test</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/blog/vintage.png">
    <meta name="description" content="">
    <link rel="preload" href="/blog/assets/css/0.styles.eb09ddcc.css" as="style"><link rel="preload" href="/blog/assets/js/app.d55c3362.js" as="script"><link rel="preload" href="/blog/assets/js/2.e56be046.js" as="script"><link rel="preload" href="/blog/assets/js/17.5df75dc7.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.aa5d7824.js"><link rel="prefetch" href="/blog/assets/js/11.f6969033.js"><link rel="prefetch" href="/blog/assets/js/12.34c857cf.js"><link rel="prefetch" href="/blog/assets/js/13.c23aedaa.js"><link rel="prefetch" href="/blog/assets/js/14.8a6c5077.js"><link rel="prefetch" href="/blog/assets/js/15.685a44c2.js"><link rel="prefetch" href="/blog/assets/js/16.1990c6df.js"><link rel="prefetch" href="/blog/assets/js/18.147dbfc8.js"><link rel="prefetch" href="/blog/assets/js/19.4bf42f91.js"><link rel="prefetch" href="/blog/assets/js/20.ada09f4f.js"><link rel="prefetch" href="/blog/assets/js/21.55b42ea5.js"><link rel="prefetch" href="/blog/assets/js/22.4c3e2b37.js"><link rel="prefetch" href="/blog/assets/js/23.d760ca08.js"><link rel="prefetch" href="/blog/assets/js/24.c780b59d.js"><link rel="prefetch" href="/blog/assets/js/25.ddd91e89.js"><link rel="prefetch" href="/blog/assets/js/3.cd6046e6.js"><link rel="prefetch" href="/blog/assets/js/4.e35994b2.js"><link rel="prefetch" href="/blog/assets/js/5.f2810536.js"><link rel="prefetch" href="/blog/assets/js/6.6b62a0f9.js"><link rel="prefetch" href="/blog/assets/js/7.e88559c3.js"><link rel="prefetch" href="/blog/assets/js/8.acfae334.js"><link rel="prefetch" href="/blog/assets/js/9.8e37e9cb.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.eb09ddcc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Coding Test</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/blog/cpp/" class="nav-link">
  C++
</a></li><li class="dropdown-item"><!----> <a href="/blog/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/blog/golang/" class="nav-link">
  GoLang
</a></li><li class="dropdown-item"><!----> <a href="/blog/swagger/" class="nav-link">
  Swagger
</a></li><li class="dropdown-item"><!----> <a href="/blog/zh/" class="nav-link">
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/oracle/" class="nav-link">
  Oracle
</a></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/flush2621" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/blog/cpp/" class="nav-link">
  C++
</a></li><li class="dropdown-item"><!----> <a href="/blog/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/blog/golang/" class="nav-link">
  GoLang
</a></li><li class="dropdown-item"><!----> <a href="/blog/swagger/" class="nav-link">
  Swagger
</a></li><li class="dropdown-item"><!----> <a href="/blog/zh/" class="nav-link">
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/oracle/" class="nav-link">
  Oracle
</a></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  关于
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/flush2621" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/java/" class="sidebar-link">JAVA说明文档</a></li><li><a href="/blog/java/javanotes.html" class="sidebar-link">“断章取义”</a></li><li><a href="/blog/java/springboot.html" class="active sidebar-link">SpringBoot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#导读" class="sidebar-link">导读</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#一、spring相关6个注解" class="sidebar-link">一、Spring相关6个注解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_1、-configuration" class="sidebar-link">1、@Configuration</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_2、-componentscan" class="sidebar-link">2、@ComponentScan</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_3、-conditional" class="sidebar-link">3、@Conditional</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_4、-import" class="sidebar-link">4、@Import</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_5、-importresource" class="sidebar-link">5、@ImportResource</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_6、-component" class="sidebar-link">6、@Component</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#二、spring-boot最核心的20个注解" class="sidebar-link">二、Spring Boot最核心的20个注解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_1、-springbootapplication" class="sidebar-link">1、@SpringBootApplication</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_2、-enableautoconfiguration" class="sidebar-link">2、@EnableAutoConfiguration</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_3、-springbootconfiguration" class="sidebar-link">3、@SpringBootConfiguration</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_4、-conditionalonbean" class="sidebar-link">4、@ConditionalOnBean</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_5、-conditionalonmissingbean" class="sidebar-link">5、@ConditionalOnMissingBean</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_6、-conditionalonclass" class="sidebar-link">6、@ConditionalOnClass</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_7、-conditionalonmissingclass" class="sidebar-link">7、@ConditionalOnMissingClass</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_8、-conditionalonwebapplication" class="sidebar-link">8、@ConditionalOnWebApplication</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_9、-conditionalonnotwebapplication" class="sidebar-link">9、@ConditionalOnNotWebApplication</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_10、-conditionalonproperty" class="sidebar-link">10、@ConditionalOnProperty</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_11、-conditionalonexpression" class="sidebar-link">11、@ConditionalOnExpression</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_12、-conditionalonjava" class="sidebar-link">12、@ConditionalOnJava</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_13、-conditionalonresource" class="sidebar-link">13、@ConditionalOnResource</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_14、-conditionalonjndi" class="sidebar-link">14、@ConditionalOnJndi</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_15、-conditionaloncloudplatform" class="sidebar-link">15、@ConditionalOnCloudPlatform</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_16、-conditionalonsinglecandidate" class="sidebar-link">16、@ConditionalOnSingleCandidate</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_17、-configurationproperties" class="sidebar-link">17、@ConfigurationProperties</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_18、-enableconfigurationproperties" class="sidebar-link">18、@EnableConfigurationProperties</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_19、-autoconfigureafter" class="sidebar-link">19、@AutoConfigureAfter</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_20、-autoconfigurebefore" class="sidebar-link">20、@AutoConfigureBefore</a></li><li class="sidebar-sub-header"><a href="/blog/java/springboot.html#_21、-autoconfigureorder" class="sidebar-link">21、@AutoConfigureOrder</a></li></ul></li></ul></li><li><a href="/blog/java/springAOP.html" class="sidebar-link">Spring AOP</a></li><li><a href="/blog/java/webflux-reactor.html" class="sidebar-link">flux-reactor</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="spring-boot最核心的27个注解"><a href="#spring-boot最核心的27个注解" class="header-anchor">#</a> Spring Boot最核心的27个注解</h1> <p><em>Timestamp:2020/5/14</em></p> <h2 id="导读"><a href="#导读" class="header-anchor">#</a> 导读</h2> <p>Spring Boot方式的项目开发已经逐步成为Java应用开发领域的主流框架，它不仅可以方便地创建生产级的Spring应用程序，还能轻松地通过一些注解配置与目前比较火热的微服务框架SpringCloud集成。</p> <p>而Spring Boot之所以能够轻松地实现应用的创建及与其他框架快速集成，最核心的原因就在于它极大地简化了项目的配置，最大化地实现了**“约定大于配置”<strong>的原则。然而基于Spring Boot虽然极大地方便了开发，但是也很容易让人“云里雾里”，特别是各种注解很容易让人</strong>“知其然而不知其所以然。**</p> <p>所以，要想用好Spring Boot就必须对其提供的各类<strong>功能注解</strong>有一个全面而清晰地认识和理解。一方面可以提高基于Spring Boot的开发效率，另一方面也是面试中被问及框架原理时所必需要掌握的知识点。在接下来的内容中，小编就带大家一起来探究下Spring Boot的一些常用注解吧！</p> <h2 id="一、spring相关6个注解"><a href="#一、spring相关6个注解" class="header-anchor">#</a> 一、Spring相关6个注解</h2> <p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="img"></p> <p>Spring Boot的有些注解也需要与Spring的注解搭配使用，这里小编梳理了在项目中与Spring Boot注解配合最为紧密的6个Spring基础框架的注解。如👇</p> <h3 id="_1、-configuration"><a href="#_1、-configuration" class="header-anchor">#</a> <strong>1、@Configuration</strong></h3> <p>从<em>Spring3.0</em>，<strong>@Configuration</strong>用于定义配置类，可替换xml配置文件，被注解的类内部包含有一个或多个被@Bean注解的方法，这些方法将会被<strong>AnnotationConfigApplicationContext</strong>或<strong>AnnotationConfigWebApplicationContext</strong>类进行扫描，并用于构建bean定义，初始化Spring容器。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskAutoConfiguration</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token string">&quot;biz-electrfence-controller&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">BizElectrfenceControllerJob</span> <span class="token function">bizElectrfenceControllerJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BizElectrfenceControllerJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token string">&quot;biz-consume-1-datasync&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">BizBikeElectrFenceTradeSyncJob</span> <span class="token function">bizBikeElectrFenceTradeSyncJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BizBikeElectrFenceTradeSyncJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_2、-componentscan"><a href="#_2、-componentscan" class="header-anchor">#</a> <strong>2、@ComponentScan</strong></h3> <p>做过web开发的同学一定都有用过@Controller，@Service，@Repository注解，查看其源码你会发现，他们中有一个共同的注解@Component，没错@ComponentScan注解默认就会装配标识了@Controller，@Service，@Repository，@Component注解的类到spring容器中。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;com.abacus.check.api&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckApiApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CheckApiApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>@SpringBootApplication注解也包含了@ComponentScan注解，所以在使用中我们也可以通过@SpringBootApplication注解的scanBasePackages属性进行配置。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>scanBasePackages <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;com.abacus.check.api&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;com.abacus.check.service&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckApiApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CheckApiApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3、-conditional"><a href="#_3、-conditional" class="header-anchor">#</a> <strong>3、@Conditional</strong></h3> <p>@Conditional是Spring4新提供的注解，通过@Conditional注解可以根据代码中设置的条件装载不同的bean，在设置条件注解之前，先要把装载的bean类去实现Condition接口，然后对该实现接口的类设置是否装载的条件。Spring Boot注解中的@ConditionalOnProperty、@ConditionalOnBean等以**@Conditional***开头的注解，都是通过集成了@Conditional来实现相应功能的。</p> <h3 id="_4、-import"><a href="#_4、-import" class="header-anchor">#</a> <strong>4、@Import</strong></h3> <p>通过导入的方式实现把实例加入springIOC容器中。可以在需要时将没有被Spring容器管理的类导入至Spring容器中。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//类定义</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circular</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">//导入</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Square</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">Circular</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainConfig</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_5、-importresource"><a href="#_5、-importresource" class="header-anchor">#</a> <strong>5、@ImportResource</strong></h3> <p>和@Import类似，区别就是@ImportResource导入的是配置文件。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:spring-redis.xml&quot;</span><span class="token punctuation">)</span>      <span class="token comment">//导入xml配置</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckApiApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CheckApiApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6、-component"><a href="#_6、-component" class="header-anchor">#</a> <strong>6、@Component</strong></h3> <p>@Component是一个元注解，意思是可以注解其他类注解，如@Controller @Service @Repository。带此注解的类被看作组件，当使用基于注解的配置和类路径扫描的时候，这些类就会被实例化。其他类级别的注解也可以被认定为是一种特殊类型的组件，比如**@Controller** 控制器（注入服务）、<strong>@Service</strong>服务（注入dao）、<strong>@Repository</strong> dao（实现dao访问）。<strong>@Component</strong>泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注，作用就相当于 XML配置，<strong>。</strong></p> <h2 id="二、spring-boot最核心的20个注解"><a href="#二、spring-boot最核心的20个注解" class="header-anchor">#</a> 二、Spring Boot最核心的20个注解</h2> <p>说完与Spring Boot密切相关的几个Spring基础注解后，下面我们就再一起看看Spring Boot提供的核心注解的内容吧！</p> <h3 id="_1、-springbootapplication"><a href="#_1、-springbootapplication" class="header-anchor">#</a> <strong>1、@SpringBootApplication</strong></h3> <p>这个注解是Spring Boot最核心的注解，用在 Spring Boot的主类上，标识这是一个 Spring Boot 应用，用来开启 Spring Boot 的各项能力。实际上这个注解是**@Configuration,@EnableAutoConfiguration,@ComponentScan**三个注解的组合。由于这些注解一般都是一起使用，所以Spring Boot提供了一个统一的注解@SpringBootApplication。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>exclude <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token class-name">MongoAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">MongoDataAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">MybatisAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">MailSenderAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> API <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>API<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2、-enableautoconfiguration"><a href="#_2、-enableautoconfiguration" class="header-anchor">#</a> <strong>2、@EnableAutoConfiguration</strong></h3> <p>允许 Spring Boot 自动配置注解，开启这个注解之后，Spring Boot 就能根据当前类路径下的包或者类来配置 Spring Bean。</p> <p>如：当前类路径下有 Mybatis 这个 JAR 包，MybatisAutoConfiguration 注解就能根据相关参数来配置 Mybatis 的各个 Spring Bean。</p> <p>@EnableAutoConfiguration实现的关键在于引入了AutoConfigurationImportSelector，其核心逻辑为selectImports方法，逻辑大致如下：</p> <ul><li>从配置文件META-INF/spring.factories加载所有可能用到的自动配置类；</li> <li>去重，并将exclude和excludeName属性携带的类排除；</li> <li>过滤，将满足条件（@Conditional）的自动配置类返回；</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@AutoConfigurationPackage</span><span class="token comment">//导入AutoConfigurationImportSelector的子类@Import({EnableAutoConfigurationImportSelector.class})</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> ENABLED_OVERRIDE_PROPERTY <span class="token operator">=</span> <span class="token string">&quot;spring.boot.enableautoconfiguration&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">excludeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3、-springbootconfiguration"><a href="#_3、-springbootconfiguration" class="header-anchor">#</a> <strong>3、@SpringBootConfiguration</strong></h3> <p>这个注解就是 @Configuration 注解的变体，只是用来修饰是 Spring Boot 配置而已，或者可利于 Spring Boot 后续的扩展。</p> <h3 id="_4、-conditionalonbean"><a href="#_4、-conditionalonbean" class="header-anchor">#</a> <strong>4、@ConditionalOnBean</strong></h3> <p>@ConditionalOnBean(A.class)仅仅在当前上下文中存在A对象时，才会实例化一个Bean，也就是说只有当A.class 在spring的applicationContext中存在时，这个当前的bean才能够创建。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token comment">//当前环境上下文存在DefaultMQProducer实例时，才能创建RocketMQProducerLifecycle这个Bean</span>
<span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span><span class="token class-name">DefaultMQProducer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">RocketMQProducerLifecycle</span> <span class="token function">rocketMQLifecycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RocketMQProducerLifecycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5、-conditionalonmissingbean"><a href="#_5、-conditionalonmissingbean" class="header-anchor">#</a> <strong>5、@ConditionalOnMissingBean</strong></h3> <p>组合@Conditional注解，和@ConditionalOnBean注解相反，仅仅在当前上下文中不存在A对象时，才会实例化一个Bean。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@Bean</span>
  <span class="token comment">//仅当当前环境上下文缺失RocketMQProducer对象时，才允许创建RocketMQProducer Bean对象</span>
  <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">RocketMQProducer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">RocketMQProducer</span> <span class="token function">mqProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RocketMQProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_6、-conditionalonclass"><a href="#_6、-conditionalonclass" class="header-anchor">#</a> <strong>6、@ConditionalOnClass</strong></h3> <p>组合 @Conditional 注解，可以仅当某些类存在于classpath上时候才创建某个Bean。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@Bean</span>
  <span class="token comment">//当classpath中存在类HealthIndicator时，才创建HealthIndicator Bean对象</span>
  <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">HealthIndicator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">HealthIndicator</span> <span class="token function">rocketMQProducerHealthIndicator</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">DefaultMQProducer</span><span class="token punctuation">&gt;</span></span> producers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>producers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RocketMQProducerHealthIndicator</span><span class="token punctuation">(</span>producers<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_7、-conditionalonmissingclass"><a href="#_7、-conditionalonmissingclass" class="header-anchor">#</a> <strong>7、@ConditionalOnMissingClass</strong></h3> <p>组合@Conditional注解，和@ConditionalOnMissingClass注解相反，当classpath中没有指定的 Class才开启配置。</p> <h3 id="_8、-conditionalonwebapplication"><a href="#_8、-conditionalonwebapplication" class="header-anchor">#</a> <strong>8、@ConditionalOnWebApplication</strong></h3> <p>组合@Conditional 注解，当前项目类型是 WEB 项目才开启配置。当前项目有以下 3 种类型:ANY(任何Web项目都匹配)、SERVLET（仅但基础的Servelet项目才会匹配）、REACTIVE（只有基于响应的web应用程序才匹配）。</p> <h3 id="_9、-conditionalonnotwebapplication"><a href="#_9、-conditionalonnotwebapplication" class="header-anchor">#</a> <strong>9、@ConditionalOnNotWebApplication</strong></h3> <p>组合@Conditional注解，和@ConditionalOnWebApplication 注解相反，当前项目类型不是 WEB 项目才开启配置。</p> <h3 id="_10、-conditionalonproperty"><a href="#_10、-conditionalonproperty" class="header-anchor">#</a> <strong>10、@ConditionalOnProperty</strong></h3> <p>组合 @Conditional 注解，当指定的属性有指定的值时才开启配置。具体操作是通过其两个属性name以及havingValue来实现的，其中name用来从application.properties中读取某个属性值，如果该值为空，则返回false;如果值不为空，则将该值与havingValue指定的值进行比较，如果一样则返回true;否则返回false。如果返回值为false，则该configuration不生效；为true则生效。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Bean</span>
 <span class="token comment">//匹配属性rocketmq.producer.enabled值是否为true</span>
 <span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;rocketmq.producer.enabled&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">RocketMQProducer</span> <span class="token function">mqProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RocketMQProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_11、-conditionalonexpression"><a href="#_11、-conditionalonexpression" class="header-anchor">#</a> <strong>11、@ConditionalOnExpression</strong></h3> <p>组合 @Conditional 注解，当 SpEL 表达式为 true 时才开启配置。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConditionalOnExpression</span><span class="token punctuation">(</span><span class="token string">&quot;${enabled:false}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BigpipeConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">OrderMessageMonitor</span> <span class="token function">orderMessageMonitor</span><span class="token punctuation">(</span><span class="token class-name">ConfigContext</span> configContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrderMessageMonitor</span><span class="token punctuation">(</span>configContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_12、-conditionalonjava"><a href="#_12、-conditionalonjava" class="header-anchor">#</a> <strong>12、@ConditionalOnJava</strong></h3> <p>组合@Conditional 注解，当运行的 Java JVM 在指定的版本范围时才开启配置。</p> <h3 id="_13、-conditionalonresource"><a href="#_13、-conditionalonresource" class="header-anchor">#</a> <strong>13、@ConditionalOnResource</strong></h3> <p>组合 @Conditional 注解，当类路径下有指定的资源才开启配置。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnResource</span><span class="token punctuation">(</span>resources<span class="token operator">=</span><span class="token string">&quot;classpath:shiro.ini&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">protected</span> <span class="token class-name">Realm</span> <span class="token function">iniClasspathRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Realm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_14、-conditionalonjndi"><a href="#_14、-conditionalonjndi" class="header-anchor">#</a> <strong>14、@ConditionalOnJndi</strong></h3> <p>组合 @Conditional 注解，当指定的 JNDI 存在时才开启配置。</p> <h3 id="_15、-conditionaloncloudplatform"><a href="#_15、-conditionaloncloudplatform" class="header-anchor">#</a> <strong>15、@ConditionalOnCloudPlatform</strong></h3> <p>组合 @Conditional 注解，当指定的云平台激活时才开启配置。</p> <h3 id="_16、-conditionalonsinglecandidate"><a href="#_16、-conditionalonsinglecandidate" class="header-anchor">#</a> <strong>16、@ConditionalOnSingleCandidate</strong></h3> <p>组合 @Conditional 注解，当指定的 class 在容器中只有一个 Bean，或者同时有多个但为首选时才开启配置。</p> <h3 id="_17、-configurationproperties"><a href="#_17、-configurationproperties" class="header-anchor">#</a> <strong>17、@ConfigurationProperties</strong></h3> <p>Spring Boot可使用注解的方式将自定义的properties文件映射到实体bean中，比如config.properties文件。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;rocketmq.consumer&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RocketMQConsumerProperties</span> <span class="token keyword">extends</span> <span class="token class-name">RocketMQProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> consumerGroup<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MessageModel</span> messageModel <span class="token operator">=</span> <span class="token class-name">MessageModel</span><span class="token punctuation">.</span>CLUSTERING<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ConsumeFromWhere</span> consumeFromWhere <span class="token operator">=</span> <span class="token class-name">ConsumeFromWhere</span><span class="token punctuation">.</span>CONSUME_FROM_LAST_OFFSET<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> consumeThreadMin <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> consumeThreadMax <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> consumeConcurrentlyMaxSpan <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> pullThresholdForQueue <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> pullInterval <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> consumeMessageBatchMaxSize <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> pullBatchSize <span class="token operator">=</span> <span class="token number">32</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_18、-enableconfigurationproperties"><a href="#_18、-enableconfigurationproperties" class="header-anchor">#</a> <strong>18、@EnableConfigurationProperties</strong></h3> <p>当@EnableConfigurationProperties注解应用到你的@Configuration时，任何被@ConfigurationProperties注解的beans将自动被Environment属性配置。 这种风格的配置特别适合与SpringApplication的外部YAML配置进行配合使用。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">RocketMQProducerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">RocketMQConsumerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RocketMQAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${spring.application.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> applicationName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_19、-autoconfigureafter"><a href="#_19、-autoconfigureafter" class="header-anchor">#</a> <strong>19、@AutoConfigureAfter</strong></h3> <p>用在自动配置类上面，表示该自动配置类需要在另外指定的自动配置类配置完之后。</p> <p>如 Mybatis 的自动配置类，需要在数据源自动配置类之后。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisAutoConfiguration</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_20、-autoconfigurebefore"><a href="#_20、-autoconfigurebefore" class="header-anchor">#</a> <strong>20、@AutoConfigureBefore</strong></h3> <p>这个和@AutoConfigureAfter注解使用相反，表示该自动配置类需要在另外指定的自动配置类配置之前。</p> <h3 id="_21、-autoconfigureorder"><a href="#_21、-autoconfigureorder" class="header-anchor">#</a> <strong>21、@AutoConfigureOrder</strong></h3> <p>Spring Boot 1.3.0中有一个新的注解@AutoConfigureOrder，用于确定配置加载的优先级顺序。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span>HIGHEST_PRECEDENCE<span class="token punctuation">)</span> <span class="token comment">// 自动配置里面的最高优先级</span>
  <span class="token annotation punctuation">@Configuration</span>
  <span class="token annotation punctuation">@ConditionalOnWebApplication</span> <span class="token comment">// 仅限于web应用</span>
  <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">BeanPostProcessorsRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 导入内置容器的设置</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedServletContainerAutoConfiguration</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@Configuration</span>
      <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Tomcat</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">EmbeddedServletContainerFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span>CURRENT<span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedTomcat</span> <span class="token punctuation">{</span>
         <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>

      <span class="token annotation punctuation">@Configuration</span>
      <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Server</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Loader</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebAppContext</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">EmbeddedServletContainerFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span>CURRENT<span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddedJetty</span> <span class="token punctuation">{</span>
         <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/java/javanotes.html" class="prev">
        “断章取义”
      </a></span> <span class="next"><a href="/blog/java/springAOP.html">
        Spring AOP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.d55c3362.js" defer></script><script src="/blog/assets/js/2.e56be046.js" defer></script><script src="/blog/assets/js/17.5df75dc7.js" defer></script>
  </body>
</html>
